    // Enviar ALTERAÇÃO CONTRATUAL SAP massivamente ate 50 registros
    //List<String> caseNumberList = new List<String>{};
	List<String> caseNumberList = new List<String>{{0}};
    Boolean comCompleteOrder = true;
    Boolean isGD = true;
	public Map<Id, PointofDelivery__c> mapPOD = new Map<Id, PointofDelivery__c>();

 

    CNT_IntegrationHelper.CCC_BR_242 request = new CNT_IntegrationHelper.CCC_BR_242();
    CNT_Contracting_Status_BO__c backOffice = new CNT_Contracting_Status_BO__c();
    Map<String,Object> resultBackOffice = new Map<String,Object>();

 

    List<Case> listCaso = [select Id, AssetId, PointofDelivery__c, CNT_Potencia__c, CNT_Conexion_Transitoria__c, CNT_Transit_Date_From__c,
    CNT_Transit_Date_To__c, CNT_Con_Transit_Guardia__c, CNT_Con_Transit_PotenciaMax__c, CNT_Con_Transit_PotenciaSimult__c,
    CNT_Con_Transit_CosenoPhi__c, CNT_Transit_Potencia_Total__c, Account.Country__c, RecordType.DeveloperName, CNT_Contract__c,
    CNT_Observation__c, CNT_Hora_Diaria__c, CNT_Total_Dias_Utilizacao__c, CNT_Ramo__c, CNT_CIIU__c, CNT_Public_Ilumination__c,
    CNT_Change_Type__c, RecordTypeId, CNT_Economical_Activity__c, Asset.NE__Order_Config__c, CNT_Documento_Pagamento__c,
    CNT_Payment_Method__c, CNT_Payment_Status__c, CNT_Mandate_Code__c, CNT_Mandate_Amount__c, Contact.Name,Account.Name, Account.Id, SuppliedEmail, PointofDeliveryAddress__c, PointofDeliveryNumber__c,
    CNT_Ticket_Expiration_Date__c, Status, CNT_LastInvoiceOptions__c
    from Case where CaseNumber IN: caseNumberList];

 

    List<CNT_Contracting_Status_BO__c> backOfficeList = new List<CNT_Contracting_Status_BO__c>();
    List<Case> updateListCase = new List<Case>();
    List<Id> caseIdList = new List<Id>();
    for(Case caso : listCaso){
        try{
            if(isGD){// Fluxo de GD 
                request = CNT_IntegrationDataBR.flow_CCC_GD_SAP_BR(caso.Id);
            } else {
                request = CNT_IntegrationDataBR.flow_CCC_SAP_BR(caso.Id);
            }
            // Tratamento de Datas::
            //date myDate = date.newInstance(2022,12,02);
			//request.body.VENDE = String.valueOf(Date.newInstance({ano},{mes},{dia}));
			//request.body.VENDE = String.valueOf(Date.Today()); //Dia Atual
            //request.Body.VENDE = String.valueOf(myDate);
            // Comentar até aqui depois que executar esses caras
            System.debug('JSON: '+JSON.serialize(request));

 

            HttpResponse response = CNT_IntegrationHelper.CCC_242_BRSync(request,caso.Id);
            System.debug('response: '+response);

 

            resultBackOffice = CNT_Utility.resultRequest(response, JSON.serialize(request), caso, 'Facturador');
            backOffice = (CNT_Contracting_Status_BO__c) resultBackOffice.get('backoffice');
            backOfficeList.add(backOffice);
        
            Boolean responseStatus = (Boolean) resultBackOffice.get('status');
            if(responseStatus){
                caso.CNT_ProcessStatus__c = '';
                caso.Status = 'CNT0008';
                updateListCase.add(caso);
                caseIdList.add(caso.Id);
				PointofDelivery__c PODGD = new PointofDelivery__c(Id = caso.PointofDelivery__c, CNT_IsGD__c = '1');
				update PODGD;
				for (CNT_Distributed_Generation__c gdRecord : [SELECT Id, CNT_Percentage__c, CNT_Benefited__c FROM CNT_Distributed_Generation__c WHERE CNT_Donator__c = :caso.CNT_Contract__c and CNT_Benefited__c != :caso.PointofDelivery__c]) {
					  mapPOD.put(gdRecord.CNT_Benefited__c, new PointofDelivery__c(Id = gdRecord.CNT_Benefited__c, CNT_IsGD__c = '2'));    
					
				}
			}
        }catch(Exception ex){
            System.debug('ERROR: '+ex.getStackTraceString() +' | '+ ex.getMessage() + ' | '+ex.getCause()); 
                
            backOffice = CNT_Utility.registerResult('Warning: Process Request', (String.isNotBlank(JSON.serialize(request))?JSON.serialize(request):''), caso)[0];
            backOffice.CNT_Comments__c = 'ERROR: '+ex.getStackTraceString() +' | '+ ex.getMessage() + ' | '+ex.getCause();
            backOfficeList.add(backOffice);
        }
    }

 

    if(caseIdList.size() > 0 && comCompleteOrder){
        CNT_ConfigurationUtility.completeOrderFlow(caseIdList);// List < id > listCaseId
    }

 

    Insert backOfficeList;
    if(updateListCase.size() > 0){ update updateListCase; }
	if(mapPOD.size() > 0){ update mapPOD.values(); }